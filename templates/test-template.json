{
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Description" : "Simple stack with one server",

  "Parameters" : {
    "KeyName" : { "Type" : "String" },
    "MainSecurityGroupId" : { "Type": "String" },
    "SubnetId" : { "Type": "String" },
    "AMI" : { "Type": "String" },
    "InstanceType": { "Type": "String" },
    "StackName" : { "Type": "String" }
  },

  "Resources" : {
    "Instance" : {
      "Type" : "AWS::EC2::Instance",
      "Properties" : {
        "ImageId" : { "Ref" : "AMI"},
        "SecurityGroupIds" : [ { "Ref" : "MainSecurityGroupId" } ],
        "SubnetId": { "Ref" : "SubnetId" },
        "InstanceType" : { "Ref" : "InstanceType" },
        "KeyName" : { "Ref" : "KeyName" },
        "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "StackName"} } ]
      }
    }
  }
}
